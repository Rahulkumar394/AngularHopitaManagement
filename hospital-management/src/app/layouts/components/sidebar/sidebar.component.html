<div class="w-64 bg-white border-r border-gray-200 flex flex-col h-full shadow-md">

  <div *ngIf="currentUser$ | async as user" class="p-4 border-b border-gray-200">
    <div class="flex items-center">
      <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
        <i class="fa-solid fa-hospital text-blue-600 text-xl"></i>
      </div>
      <div>
        <h2 class="font-bold text-gray-800">Hospital Admin</h2>
        <!-- FIX: Removed the '?' from user.roles -->
        <span class="text-xs bg-red-100 text-red-700 font-semibold px-2 py-0.5 rounded-full">{{ user.roles.join(', ') }}</span>
      </div>
    </div>
  </div>

  <!-- Navigation Links -->
  <nav class="flex-1 px-4 py-4 space-y-2">
    <a routerLink="/app/dashboard" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-chart-pie w-6 text-center"></i>
      <span class="ml-3 font-medium">Dashboard</span>
    </a>
    <a routerLink="/app/user-management" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-users w-6 text-center"></i>
      <span class="ml-3 font-medium">Users</span>
    </a>
    <a routerLink="/app/doctors" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-user-doctor w-6 text-center"></i>
      <span class="ml-3 font-medium">Doctors</span>
    </a>
    <a routerLink="/app/roles-permissions" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
        <i class="fa-solid fa-user-shield w-6 text-center"></i>
        <span class="ml-3 font-medium">Roles & Permissions</span>
    </a>
    <a routerLink="/app/billing" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-file-invoice-dollar w-6 text-center"></i>
      <span class="ml-3 font-medium">Billing</span>
    </a>
    <a routerLink="/app/pharmacy" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-pills w-6 text-center"></i>
      <span class="ml-3 font-medium">Pharmacy</span>
    </a>
  </nav>

  <!-- Bottom section with Settings and Logout -->
  <div class="px-4 py-4 border-t border-gray-200 space-y-2">
    <a routerLink="/app/settings" routerLinkActive="bg-blue-500 text-white" class="flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-blue-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-gear w-6 text-center"></i>
      <span class="ml-3 font-medium">Settings</span>
    </a>
    <button (click)="logout()" class="w-full flex items-center px-3 py-2.5 rounded-lg text-gray-600 hover:bg-red-500 hover:text-white transition-colors duration-200">
      <i class="fa-solid fa-arrow-right-from-bracket w-6 text-center"></i>
      <span class="ml-3 font-medium">Logout</span>
    </button>
  </div>
</div>